:toc:
:imagesdir: img

= Heroku
https://dashboard.heroku.com/apps

== 初期設定

=== クレジットカード登録

. 右上のユーザーアイコンを選択。
. `Account Settings` を選択。
. `Billing` を選択。
. `Billing Information` で `Add Credit Card` で追加。

=== デプロイ(初回)
プロジェクト開始手順が完了していることが前提。

. `$ cd application`
. `$ docker-compose build`
. `$ docker-compose up -d`
. `$ cd ..`
. `$ heroku login`
. `$ heroku container:login`
. `$ cd application`
. `$ heroku create appname`
. `$ heroku container:push web`
. `$ heroku addons:create heroku-postgresql:hobby-dev`
. `$ heroku container:release web`
. `$ heroku run rails db:migrate`
. `$ heroku open`


=== スリープ防止
30分アクセスしないと、スリープ状態に入ってしまうのを `Heroku Scheduler` を使用して防止する。

. `$ heroku addons:create scheduler:standard` でアドオンを追加。
. https://dashboard.heroku.com/apps から対象アプリの画面を開く。
. `Resources` を選択。
. `Add-ons` の `Heroku Scheduler` を選択し、設定画面を別画面で開く。
. `Create Job` を選択。
. 表「スケージュール設定」で設定。

.スケジュール設定
|===
|項目 |値

|Schedule
|Every 10 minites

|Run Command
|curl [アプリのURLルートパス]/system/test

|===